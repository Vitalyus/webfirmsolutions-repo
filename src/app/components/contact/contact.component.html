<section class="contact-section">
  <div class="container">
    <mat-card class="contact-card">
      <mat-card-content class="contact-content">
        <div class="contact-header">
          <mat-icon class="contact-icon">handshake</mat-icon>
          <h2 class="mat-display-1">{{ translations.title }}</h2>
          <p class="mat-body-1 contact-subtitle">
            {{ translations.subtitle }}
          </p>
        </div>

        <div class="contact-info">
          <div class="info-item">
            <mat-icon>email</mat-icon>
            <div>
              <h4>{{ translations.emailUs }}</h4>
              <p>contact@webfirmsolutions.com</p>
            </div>
          </div>
          
          <div class="info-item">
            <mat-icon>schedule</mat-icon>
            <div>
              <h4>{{ translations.responseTime }}</h4>
              <p>{{ translations.within24Hours }}</p>
            </div>
          </div>
          
          <div class="info-item">
            <mat-icon>location_on</mat-icon>
            <div>
              <h4>{{ translations.basedIn }}</h4>
              <p>{{ translations.availableWorldwide }}</p>
            </div>
          </div>
        </div>

        <div class="contact-actions">
          <button 
            mat-raised-button 
            color="primary" 
            class="contact-button"
            (click)="openContactDialog()"
          >
            <mat-icon>send</mat-icon>
            {{ translations.sendMessage }}
          </button>
          
          <button 
            mat-stroked-button 
            color="accent"
            class="secondary-button"
          >
            <mat-icon>schedule</mat-icon>
            {{ translations.scheduleCall }}
          </button>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</section>

<!-- Contact Modal -->
<div class="modal-overlay" *ngIf="isModalOpen" (click)="onModalBackdropClick($event)">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>{{ translations.modal.title }}</h3>
      <button mat-icon-button (click)="closeModal()" class="close-button">
        <mat-icon>close</mat-icon>
      </button>
    </div>
    
    <form (ngSubmit)="onSubmit()" class="contact-form">
      <mat-form-field appearance="outline">
        <mat-label>{{ translations.modal.name }}</mat-label>
        <input 
          matInput 
          [(ngModel)]="formData.name" 
          name="name"
          required
          [placeholder]="translations.modal.namePlaceholder"
        >
        <mat-icon matSuffix>person</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>{{ translations.modal.email }}</mat-label>
        <input 
          matInput 
          type="email"
          [(ngModel)]="formData.email" 
          name="email"
          required
          [placeholder]="translations.modal.emailPlaceholder"
        >
        <mat-icon matSuffix>email</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>{{ translations.modal.message }}</mat-label>
        <textarea 
          matInput 
          [(ngModel)]="formData.message" 
          name="message"
          required
          rows="3"
          [placeholder]="translations.modal.messagePlaceholder"
        ></textarea>
        <mat-icon matSuffix>message</mat-icon>
      </mat-form-field>

      <!-- Honeypot field for bot detection (hidden) -->
      <input 
        type="text" 
        [(ngModel)]="honeypotField" 
        name="website"
        style="position: absolute; left: -9999px; visibility: hidden;"
        tabindex="-1"
        autocomplete="off"
      >

      <!-- Captcha Challenge -->
      <div class="captcha-section" *ngIf="captchaChallenge">
        <div class="captcha-challenge">
          <mat-icon class="captcha-icon">quiz</mat-icon>
          <span class="captcha-question">{{ captchaChallenge.question }}</span>
          <button 
            type="button" 
            mat-icon-button 
            (click)="refreshCaptcha()"
            matTooltip="Generate new challenge"
            class="refresh-captcha"
          >
            <mat-icon>refresh</mat-icon>
          </button>
        </div>
        
        <mat-form-field appearance="outline" class="captcha-input">
          <mat-label>{{ translations.modal.captcha.answer }}</mat-label>
          <input 
            matInput 
            type="number"
            [(ngModel)]="formData.captcha" 
            name="captcha"
            required
            [placeholder]="translations.modal.captcha.placeholder"
            autocomplete="off"
          >
          <mat-icon matSuffix>calculate</mat-icon>
        </mat-form-field>
      </div>

      <div class="modal-actions">
        <button 
          type="button" 
          mat-stroked-button 
          (click)="closeModal()"
          class="cancel-button"
          [disabled]="isSubmitting"
        >
          {{ translations.common.cancel }}
        </button>
        <button 
          type="submit" 
          mat-raised-button 
          color="primary"
          class="send-button"
          [disabled]="isSubmitting"
        >
          <mat-spinner diameter="20" *ngIf="isSubmitting" style="margin-right: 8px;"></mat-spinner>
          <mat-icon *ngIf="!isSubmitting">send</mat-icon>
          {{ isSubmitting ? translations.modal.sending : translations.modal.sendMessage }}
        </button>
      </div>
    </form>
  </div>
</div>