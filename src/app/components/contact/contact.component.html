<section class="contact-section">
  <div class="container">
    <mat-card class="contact-card">
      <mat-card-content class="contact-content">
        <div class="contact-header">
          <mat-icon class="contact-icon">handshake</mat-icon>
          <h2 class="mat-display-1">{{ translations.title }}</h2>
          <p class="mat-body-1 contact-subtitle">
            {{ translations.subtitle }}
          </p>
        </div>

        <div class="contact-info">
          <div class="info-item">
            <mat-icon>email</mat-icon>
            <div>
              <h4>{{ 'contact.emailUs' | translate }}</h4>
              <a href="mailto:contact@webfirmsolutions.com" class="email-link">
                contact@webfirmsolutions.com
              </a>
            </div>
          </div>
          
          <div class="info-item">
            <mat-icon>schedule</mat-icon>
            <div>
              <h4>{{ 'contact.responseTime' | translate }}</h4>
              <p>{{ 'contact.within24Hours' | translate }}</p>
            </div>
          </div>
          
          <div class="info-item">
            <mat-icon>location_on</mat-icon>
            <div>
              <h4>{{ 'contact.basedIn' | translate }}</h4>
              <p>{{ 'contact.availableWorldwide' | translate }}</p>
            </div>
          </div>
        </div>

        <div class="contact-actions">
          <button 
            mat-raised-button 
            color="primary" 
            class="contact-button"
            (click)="openContactDialog()"
          >
            <mat-icon>send</mat-icon>
            {{ 'contact.sendMessage' | translate }}
          </button>
          
          <button 
            mat-stroked-button 
            color="accent"
            class="secondary-button"
          >
            <mat-icon>schedule</mat-icon>
            {{ 'contact.scheduleCall' | translate }}
          </button>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</section>

<!-- Contact Modal -->
<div class="modal-overlay" *ngIf="isModalOpen" (click)="onModalBackdropClick($event)">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>{{ 'contact.modal.title' | translate }}</h3>
      <button mat-icon-button (click)="closeModal()" class="close-button">
        <mat-icon>close</mat-icon>
      </button>
    </div>
    
    <form (ngSubmit)="onSubmit()" class="contact-form">
      <mat-form-field appearance="outline">
        <mat-label>{{ 'contact.modal.name' | translate }}</mat-label>
        <input 
          matInput 
          [(ngModel)]="formData.name" 
          name="name"
          required
          [placeholder]="'contact.modal.namePlaceholder' | translate"
        >
        <mat-icon matSuffix>person</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>{{ 'contact.modal.email' | translate }}</mat-label>
        <input 
          matInput 
          type="email"
          [(ngModel)]="formData.email" 
          name="email"
          required
          [placeholder]="'contact.modal.emailPlaceholder' | translate"
        >
        <mat-icon matSuffix>email</mat-icon>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>{{ 'contact.modal.message' | translate }}</mat-label>
        <textarea 
          matInput 
          [(ngModel)]="formData.message" 
          name="message"
          required
          rows="5"
          [placeholder]="'contact.modal.messagePlaceholder' | translate"
        ></textarea>
        <mat-icon matSuffix>message</mat-icon>
      </mat-form-field>

      <!-- Honeypot field for bot detection (hidden) -->
      <input 
        type="text" 
        [(ngModel)]="honeypotField" 
        name="website"
        style="position: absolute; left: -9999px; visibility: hidden;"
        tabindex="-1"
        autocomplete="off"
      >

      <!-- Captcha Challenge -->
      <div class="captcha-section" *ngIf="captchaChallenge">
        <div class="captcha-challenge">
          <mat-icon class="captcha-icon">quiz</mat-icon>
          <span class="captcha-question">{{ captchaChallenge.question }}</span>
          <button 
            type="button" 
            mat-icon-button 
            (click)="refreshCaptcha()"
            [matTooltip]="'contact.modal.captcha.refresh' | translate"
            class="refresh-captcha"
          >
            <mat-icon>refresh</mat-icon>
          </button>
        </div>
        
        <mat-form-field appearance="outline" class="captcha-input">
          <mat-label>{{ 'contact.modal.captcha.answer' | translate }}</mat-label>
          <input 
            matInput 
            type="number"
            [(ngModel)]="formData.captcha" 
            name="captcha"
            required
            [placeholder]="'contact.modal.captcha.placeholder' | translate"
            autocomplete="off"
          >
          <mat-icon matSuffix>calculate</mat-icon>
        </mat-form-field>
      </div>

      <div class="modal-actions">
        <button 
          type="button" 
          mat-stroked-button 
          (click)="closeModal()"
          class="cancel-button"
          [disabled]="isSubmitting"
        >
          {{ 'contact.modal.cancel' | translate }}
        </button>
        <button 
          type="submit" 
          mat-raised-button 
          color="primary"
          class="send-button"
          [disabled]="isSubmitting"
        >
          <mat-spinner diameter="20" *ngIf="isSubmitting" style="margin-right: 8px;"></mat-spinner>
          <mat-icon *ngIf="!isSubmitting">send</mat-icon>
          {{ isSubmitting ? ('contact.modal.sending' | translate) : ('contact.modal.sendMessage' | translate) }}
        </button>
      </div>
    </form>
  </div>
</div>